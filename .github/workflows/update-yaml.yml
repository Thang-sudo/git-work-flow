# Define update file action workflow
# Events + Jobs + Runners + Steps + Actions
# Events = something that trigger the workflow like on: push 
# Jobs = job runs on triggered event
# Runner = container env that runs the code like runs-on
# Steps = step of a job
# Actions = action of that step
name: Update and Download Yaml file
on: 
  push:
    branches: 
      - main

jobs: 
  update-and-download:
    runs-on: ubuntu-latest
    steps:
    # The default git checkout has fetch-depth = 1 meaning it's checkout the lastet commit 
    # Change to 0 to fetch the whole commit history
    - name: Checkout code
      uses: actions/checkout@v2
      with:
        fetch-depth: 0
    
    - name: Setup Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'
    
    - name: Install dependencies 
      run: |
        python -m pip install --upgrade pip
        pip install pyyaml
    
    - name: Run python script
      run: |
        python update-yaml.py
      working-directory: ${{ github.workspace }}


